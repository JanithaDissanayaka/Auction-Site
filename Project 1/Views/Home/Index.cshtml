home/index.cshtml
@model List<Project_1.Models.Listing>

@{
    ViewData["Title"] = "Home Page";
}

<link rel="stylesheet" href="~/css/home.css" />

<main>
    <header class="hero-section d-flex align-items-center justify-content-center text-center">
        <div class="hero-content">
            <h1 class="hero-title display-3 fw-light mb-3 text-light">Bid for Timeless Treasures</h1>
            <p class="hero-subtitle fs-5 mb-5 text-light">Discover authenticated rare antiques and exquisite collectibles from around the world.</p>
            <div class="d-flex justify-content-center gap-3">
                <a href="/Listings" class="btn btn-primary-gold btn-lg px-5 py-3 shadow-sm text-uppercase">Start Bidding</a>
                <a href="/Identity/Account/Register" class="btn btn-outline-light-pro btn-lg px-5 py-3">Join Now</a>
            </div>
        </div>
    </header>

    <section class="section container my-5 py-5">
        <h2 class="section-title text-center mb-2">Browse by Category</h2>
        <p class="text-center text-muted mb-5 section-subtitle">Explore our curated selection of timeless antiques and collectibles.</p>

        <div class="row g-4 justify-content-center">
            <div class="col-lg-3 col-md-6 col-12">
                <a asp-controller="Listings" asp-action="Index" asp-route-category="Furniture" class="category-card-pro h-100">
                    <div class="category-icon-wrap">
                        <i class="bi bi-lamp-fill"></i>
                    </div>
                    <h5 class="fw-bold">Furniture</h5>
                    <p class="text-muted small">Classic, handcrafted furniture with elegant historical detail.</p>
                </a>
            </div>

            <div class="col-lg-3 col-md-6 col-12">
                <a asp-controller="Listings" asp-action="Index" asp-route-category="Art" class="category-card-pro h-100">
                    <div class="category-icon-wrap">
                        <i class="bi bi-brush-fill"></i>
                    </div>
                    <h5 class="fw-bold">Art & Paintings</h5>
                    <p class="text-muted small">Original artworks and paintings from renowned creators.</p>
                </a>
            </div>

            <div class="col-lg-3 col-md-6 col-12">
                <a asp-controller="Listings" asp-action="Index" asp-route-category="Jewelry" class="category-card-pro h-100">
                    <div class="category-icon-wrap">
                        <i class="bi bi-gem"></i>
                    </div>
                    <h5 class="fw-bold">Jewelry</h5>
                    <p class="text-muted small">Luxury jewelry, gems, and rare adornments from bygone eras.</p>
                </a>
            </div>

            <div class="col-lg-3 col-md-6 col-12">
                <a asp-controller="Listings" asp-action="Index" asp-route-category="Collectibles" class="category-card-pro h-100">
                    <div class="category-icon-wrap">
                        <i class="bi bi-book-half"></i>
                    </div>
                    <h5 class="fw-bold">Collectibles</h5>
                    <p class="text-muted small">Unique collectibles that tell stories of heritage and culture.</p>
                </a>
            </div>
        </div>
    </section>

    <section class="section section-bg-pro py-5">
        <div class="container">
            <h2 class="section-title text-center mb-2">Featured Auctions</h2>
            <p class="text-center text-muted mb-5 section-subtitle">Current and upcoming listings for your consideration.</p>

            @if (Model != null && Model.Any())
            {
                <div class="row justify-content-center g-4">
                    @foreach (var listing in Model.Take(3)) // Limiting to 3 for a clean featured section
                    {
                        var highestBid = listing.Bids?.OrderByDescending(b => b.Price).FirstOrDefault();
                        var currentPrice = highestBid?.Price ?? listing.Price;

                        <div class="col-lg-4 col-md-6">
                            <div class="auction-card card shadow-lg border-0 h-100">
                                <div class="position-relative">
                                    <img src="~/Images/@listing.ImagePath" alt="@listing.Title" class="card-img-top auction-img">
                                    @if (listing.IsSold)
                                    {
                                        <span class="sold-badge">SOLD</span>
                                    }
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title fw-bold">@listing.Title</h5>
                                    <p class="card-text text-muted small mb-2 flex-grow-1">@listing.Description?.Substring(0, Math.Min(80, listing.Description.Length))...</p>

                                    <div class="d-flex justify-content-between align-items-center mb-3 pt-2 border-top">
                                        <p class="card-price mb-0 small text-uppercase">
                                            Current Bid: <strong class="text-primary-gold fs-6">Rs @currentPrice.ToString("N2")</strong>
                                        </p>
                                    </div>

                                    <p class="text-muted mb-3 small">
                                        Time Remaining:
                                        <span class="auction-timer fw-semibold @(listing.IsSold ? "text-danger" : "text-dark")"
                                              data-closing-time="@listing.ClosingTime.ToString("o")"
                                              data-listing-id="@listing.Id">
                                            @(listing.IsSold ? "Bidding Closed" : "Calculating...")
                                        </span>
                                    </p>

                                    <div class="d-grid gap-2 mt-auto">
                                        <a href="/Listings/Details/@listing.Id" class="btn btn-primary-dark fw-semibold text-uppercase @(listing.IsSold ? "disabled" : "")">
                                            @(listing.IsSold ? "View Lot" : "Place a Bid")
                                        </a>
                                        <a href="/Listings/Details/@listing.Id" class="btn btn-outline-secondary-pro">View Details</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
                <div class="text-center mt-5">
                    <a href="/Listings" class="btn btn-primary-gold btn-lg px-5 py-3 shadow-sm text-uppercase">View All Listings</a>
                </div>
            }
            else
            {
                <p class="text-center text-muted fs-5">No active auctions available right now. Check back soon!</p>
            }
        </div>
    </section>

    <section class="section container text-center my-5 py-5">
        <h2 class="section-title mb-4">How It Works</h2>
        <div class="row g-5">
            <div class="col-md-4">
                <div class="how-it-works-step p-4">
                    <div class="step-icon-pro">1</div>
                    <h4 class="fw-bold mt-3">Register</h4>
                    <p class="text-muted">Create a secure account to join our exclusive community of collectors.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="how-it-works-step p-4">
                    <div class="step-icon-pro">2</div>
                    <h4 class="fw-bold mt-3">Find & Bid</h4>
                    <p class="text-muted">Browse authenticated listings and place your competitive bid with ease.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="how-it-works-step p-4">
                    <div class="step-icon-pro">3</div>
                    <h4 class="fw-bold mt-3">Win & Collect</h4>
                    <p class="text-muted">Win the auction and securely collect your new, timeless treasure.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="testimonials py-5 text-center section-bg-pro">
        <div class="container">
            <h2 class="section-title fw-bold mb-2">Trusted by Collectors Worldwide</h2>
            <p class="text-center text-muted mb-5 section-subtitle">Hear from those who have found their perfect pieces.</p>

            <div class="row justify-content-center g-4">
                <div class="col-md-4">
                    <div class="testimonial-card p-4 shadow-pro rounded bg-white h-100 d-flex flex-column">
                        <p class="fst-italic mb-3 flex-grow-1 testimonial-quote">"The most elegant auction experience online. The curation is impeccable, and every bid feels special."</p>
                        <h6 class="fw-bold mb-0 text-primary-dark">- Emily Carter, London</h6>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="testimonial-card p-4 shadow-pro rounded bg-white h-100 d-flex flex-column">
                        <p class="fst-italic mb-3 flex-grow-1 testimonial-quote">"I’ve expanded my collection with verified, high-quality antiques. The platform is highly professional and easy to navigate."</p>
                        <h6 class="fw-bold mb-0 text-primary-dark">- Ravi Perera, Colombo</h6>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="testimonial-card p-4 shadow-pro rounded bg-white h-100 d-flex flex-column">
                        <p class="fst-italic mb-3 flex-grow-1 testimonial-quote">"Fast, secure, and a beautifully designed platform. The customer service is second to none. 10/10!"</p>
                        <h6 class="fw-bold mb-0 text-primary-dark">- Alex Tan, Singapore</h6>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>


@section Scripts {
    <script>
        // Professional Timer Script (Simplified for display)
        function updateTimer() {
            document.querySelectorAll('.auction-timer').forEach(timerEl => {
                const closingTime = new Date(timerEl.getAttribute('data-closing-time'));
                const now = new Date();
                const diff = closingTime - now;

                if (diff < 0) {
                    timerEl.textContent = 'Bidding Closed';
                    timerEl.classList.remove('text-success');
                    timerEl.classList.add('text-danger');
                    const bidButton = timerEl.closest('.card-body').querySelector('.btn-primary-dark');
                    if (bidButton) {
                        bidButton.classList.add('disabled');
                        bidButton.textContent = 'View Lot';
                    }
                    return;
                }

                // Calculate time components
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                // Format the output
                let timeString = '';
                if (days > 0) timeString += `${days}d `;
                timeString += `${String(hours).padStart(2, '0')}h ${String(minutes).padStart(2, '0')}m ${String(seconds).padStart(2, '0')}s`;

                timerEl.textContent = timeString;
            });
        }

        // Run immediately and then every second
        updateTimer();
        setInterval(updateTimer, 1000);
    </script>
}